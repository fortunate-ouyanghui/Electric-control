- 在keil5中使用C++语法，配置过程如图所示：
![QQ截图20250416055217](https://github.com/user-attachments/assets/37d4f75d-96c3-41a5-b97f-d317d51f4524)
## CAN通信
- 编码：1：can_H和can_L无电平差（隐形电平）  0：can_H和can_L有电平差（显性电平）
- 收发模式：
1. 常规模式：从总线发送  从总线接收
2. 回环模式：向总线和本机发送  不从总线接收仅从本机接收
3. 静默模式：不向总线仅向本机发送  从总线和本机接收
4. 回环静默模式： 自发自收  不向总线发送  不从总线接收
- CANID(CANID最大为11位即0x7ff)：一个设备主机可以发送多个CANID，例如：设备主机只负责发送ID为0x201或其他ID的报文，从设备根据自身需求选择需要的CANID报文。
- 冲突检测机制：当一条链路上出现显性电平（0）和隐性电平（1）时，表现为显性
- 滤波器与掩码（过滤出想要的数据）
![can1](https://github.com/user-attachments/assets/32833de9-7f23-42a3-9687-c7ee6b334a69)  
示例：
```C
从机：想要的数据为：0x001 0001 01xx（从机会配置Filter_ID = 0x001 0001 0100） 
则掩码需配置为：   0x111 1111 1100
接收到的数据：比如：0x001 0001 0111(和掩码按位与)  
                 0x111 1111 1100  
            ------------------------  
                 0x001 0001 0100(得到的结果)  
把得到的结果和从机配置的Filter_ID对比，看是否相同，相同则是想要的数据。  
```
- 帧格式
![can2](https://github.com/user-attachments/assets/8c97e69d-83d4-47df-aeae-e3a4ce3da3e4)
![标准帧](https://github.com/user-attachments/assets/5c76849b-8bd0-4b47-997d-a5e1d1ac9775)
- can收发器
![can3](https://github.com/user-attachments/assets/98222a4f-9151-4d17-84e3-28d0aefea3ac)   
发送方式：把发送的数据加到can收发器中  
接收方式：从接收队列（FIFO队列）选择接收  















